{% extends "base.html" %}
{% block content %}

<div class="page-header">
  <h1>{% block title %}7:30? Ne, děkujeme.{% endblock %} <small>A dřív už vůbec ne.</small></h1>
</div>

<h2>Podepsat petici</h2>
{% if user.is_authenticated %}
<p>Jste přihlášen jako FIŤák {{ user.username }}
{% if user.get_full_name %}({{ user.get_full_name }}){% endif %}.
<a  class="btn btn-xs btn-danger" href="/logout/">Odhlásit</a></p>

{% if user.signature.signed %}
<p>Děkujeme za vaši podporu. Pokud byste si to přáli, kdykoliv se sem můžete vrátit, přihlásit se a <a href="{% url 'views.toggle' %}">svůj podpis zrušit</a>, ačkoli byste nás tím velice zarmoutili.</p>
{% else %}
<p><a href="{% url 'views.toggle' %}" class="btn btn-lg btn-primary">Podepsat petici</a></p>
{% endif %}


{% else %}
  {% if baddomain %}
  <p>Prosím použijte Google účet na fakultní doméně (@fit.cvut.cz).</p>
  {% endif %}
    <p><a href="{% url 'social:begin' 'google-oauth2' %}" class="btn btn-lg btn-primary">Přihlásit se přes fakultní Google</a></p>
{% endif %}

<h2>Signatáři ({{ total }})</h2>
<div class="panel panel-default">
  <table class="table">
    <tr>
      <th>Člen akademické obce FIT ČVUT</th>
      <th>Podepsal petici</th>
    </tr>
  {% for signature in signatures %}
    <tr>
      <td>{% if signature.user.get_full_name %}{{ signature.user.get_full_name }} ({{ signature.user }}){% else %}{{ signature.user }}{% endif %}</td>
      <td>{{ signature.timestamp }}</td>
    </tr>
  {% empty %}
    <tr><td colspan="2">Nikdo petici ještě nepodepsal. Je na čase to změnit.</td><tr>
  {% endfor %}
  </table>
</div>

{% if signatures.paginator.num_pages > 1 %}
<ul class="pagination">
  <li{% if not signatures.has_previous %} class="disabled"{% endif %}>
    <a{% if signatures.has_previous %} href="?page={{ signatures.previous_page_number }}"{% endif %}>&laquo;</a>
  </li>
  {% for num in signatures.paginator.page_range %}
    {% ifequal num signatures.number %}
      <li class="active"><a>{{ num }}<span class="sr-only">(current)</span></a></li>
    {% else %}
      <li><a href="?page={{ num }}">{{ num }}</a></li>
    {% endifequal %}
  {% endfor %}
  <li{% if not signatures.has_next %} class="disabled"{% endif %}>
    <a{% if signatures.has_next %} href="?page={{ signatures.next_page_number }}"{% endif %}>&raquo;</a>
  </li>
</ul>
{% endif %}

{% endblock %}
